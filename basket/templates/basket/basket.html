{% extends "base.html" %}
{% load static %}



{% block page_header %}
<div class="container head-container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}

{% block content %}

<div class="container-fluid title-container basket_container mb-3">
    <div class="row">
        <div class="col-12">
            <h1>My Basket</h1>
            <hr>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            {% if basket_items %}
            <div class="container-fluid text-left m-0">
                {% for item in basket_items %}
                <div class="row text-left border-bottom">

                    <div class="col-2 col-md-2 d-flex align-items-center">
                        {% if item.product_image %}
                        <img class="img-thumbnail rounded float-left custom-img" src="{{ item.product_image.url }}"
                            alt="{{ item.product_name }}">
                        {% else %}
                        <img class="img-thumbnail rounded float-left custom-img" src="{{ MEDIA_URL }}noimage.jpeg"
                            alt="{{ item.product_name }}">
                        {% endif %}
                    </div>
                    <div class="col-8 col-md-8">
                        <p>{{ item.product_name }}</p>
                        <p>Â£{{ item.product_price }}</p>
                    </div>
                    <div class="col-2 col-md-2 d-flex align-items-center">
                        <input class="form-control qty_input" type="number" name="quantity" value="{{ item.quantity }}"
                            min="1" max="99" data-item_id="{{ item.item_id }}" id="id_qty_{{ item.item_id }}">
                    </div>
                    </row>
                </div>
                {% endfor %}
                {% else %}
                <p class="mt-3">Your basket is currently empty</p>
                <a href="{% url 'products' %}" class="text-black text-decoration-none text-uppercase" role="button"><i
                        class="fa-solid fa-circle-chevron-left"></i> Keep Shopping</a>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12">
            <div class="container-fluid text-left">
                <p class="m-0">Total: {{ total|floatformat:2 }}</p>
                {% if delivery == 0 %}
                <p class="m-0">Delivery: {{ delivery|floatformat:2 }}</p>
                <p class="m-0">Congratulations, you have triggered FREE delivery!</p>
                {% else %}
                <p class="m-0">Delivery: {{ delivery|floatformat:2 }}</p>
                {% endif %}
                <p class="m-0">Grand Total (inc delivery): {{ grand_total|floatformat:2 }}</p>
            </div>
        </div>
    </div>

    {% endblock %}